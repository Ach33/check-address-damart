/*
 *  Services adresses La Poste SNA
 *  serca-form - v0.0.1 (https://lapostesna.github.io/serca-form/)
 *  Interface de demonstration des services adresses Serca.
 *  Copyright 2017-2017 La Poste SNA
 *  Licensed under MIT (https://github.com/LaposteSNA/serca-form/blob/master/LICENSE)
 */

if("undefined"==typeof jQuery)throw new Error('Le plugin "sercaForm" nécessite jQuery!');!function(e){"use strict";var r,s="&hlDebut=<strong>&hlFin=</strong>",a="&hlDebutRestruct=<p class='color_red'>&hlFinRestruct=</p>";e.fn.setOptionTitle=function(e){var r="";return void 0!==e&&e.length>0&&(r="<h1>"+e+"</h1>"),r},e.fn.retrieveAddressFromSerca=function(r,s,a){var o,d=r.reponse.adresse.slice(0,a.nbDisplayedResults);return"address_row6"==s&&(o=d.map(function(r){return{value:r.ligne6.codePostal+" "+r.ligne6.libelleAcheminement,highlightedResult:e.fn.getHighlightedResult(r.cea,s,r,a),address_row1:"",address_row2:"",address_row3:"",address_row4:"",address_row5:""!==r.ligne5.libelle?r.ligne5.libelle:"",address_row6:r.ligne6.codePostal+" "+r.ligne6.libelleAcheminement,address_row7:"",insee_code:r.ligne6.codeInsee,libelle_acheminement:r.ligne6.libelleAcheminement}})),"address_row4"==s&&(o=d.map(function(r){return{value:r.ligne4.libelle,highlightedResult:e.fn.getHighlightedResult(r.cea,s,r,a),address_row1:"",address_row2:"",address_row3:"",address_row4:r.ligne4.libelle,address_row5:""!==r.ligne5.libelle?r.ligne5.libelle:"",address_row6:r.ligne6.codePostal+" "+r.ligne6.libelleAcheminement,address_row7:"",numext:r.ligne4.numero+(""!==r.ligne4.extLongue?" "+r.ligne4.extLongue:""),justVoieaddress_row4:r.ligne4.libelleVoie}})),"address_row3"==s&&(o=d.map(function(r){return void 0!==r.ligne3?{value:r.ligne3.libelle,highlightedResult:e.fn.getHighlightedResult(r.cea,s,r,a),address_row1:"",address_row2:"",address_row3:""!==r.ligne3.libelle?r.ligne3.libelle:"",address_row4:r.ligne4.libelle,address_row5:""!==r.ligne5.libelle?r.ligne5.libelle:"",address_row6:r.ligne6.codePostal+" "+r.ligne6.libelleAcheminement,address_row7:"",insee_code:r.ligne3.codeInsee}:{value:"",highlightedResult:'<li><div class="address-autocomplete-result-list address-autocomplete-result-list-style-'+a.autocompleteListStyle+'" + address-autocomplete-result-list-style-empty" id="9999">Aucune Proposition...</div></li>',address_row1:"",address_row2:"",address_row3:"",address_row4:"",address_row5:"",address_row6:"",address_row7:"",insee_code:"-1"}})),o},e.fn.getSercaURL=function(r,s,a){var o="",d={address_row6:"/services/solr/fulltextProfic?chaineRecherche=%strSearch%&typeRecherche=commune&nbItems="+a.nbDisplayedResults+"&optionMot=CommencePar&optionRecherche=AND_OR&idClient=%login%&passwdClient=%password%&typeResultat=json",address_row4_insee_code:"/services/solr/fulltextProfic?chaineRecherche=%strSearch%&nbItems="+a.nbDisplayedResults+"&optionFiltre=code_insee=%strCodeInsee%&typeRecherche=voie;pdi&optionMot=CommencePar&optionRecherche=AND_OR&idClient=%login%&passwdClient=%password%&typeResultat=json",address_row4_acheminement_label:"/services/solr/fulltextProfic?chaineRecherche=%strSearch%&nbItems="+a.nbDisplayedResults+"&optionFiltre=libelle_acheminement=%strLibAch%&typeRecherche=voie;pdi&optionMot=CommencePar&optionRecherche=AND_OR&idClient=%login%&passwdClient=%password%&typeResultat=json",address_row3:"/services/solr/fulltextProfic?chaineRecherche=%strSearch%&nbItems="+a.nbDisplayedResults+"&optionFiltre=libelle_voie=%strlibVoie%&optionFiltre=numero_ext=%strNumExt%&optionFiltre=libelle_acheminement=%strLibAch%&typeRecherche=ligne3&optionMot=CommencePar&optionRecherche=AND_OR&idClient=%login%&passwdClient=%password%&typeResultat=json"};return"address_row6"==s?o=(o=(a.corpsProxy||"")+a.distantDNS+d.address_row6).replace("%strSearch%",r):"address_row4_insee_code"==s?o=(o=(o=(a.corpsProxy||"")+a.distantDNS+d.address_row4_insee_code).replace("%strSearch%",r)).replace("%strCodeInsee%",e("#address_row6").attr("insee_code")):"address_row4_acheminement_label"==s?o=(o=(o=(a.corpsProxy||"")+a.distantDNS+d.address_row4_acheminement_label).replace("%strSearch%",r)).replace("%strLibAch%",e("#address_row6").attr("libelle_acheminement")):"address_row3"==s&&(o=(a.corpsProxy||"")+a.distantDNS+d.address_row3,""==r&&(r=e("#address_row4").attr("numext")+" "+e("#address_row4").attr("voie")),o=(o=(o=(o=o.replace("%strSearch%",r)).replace("%strlibVoie%",e("#address_row4").attr("voie"))).replace("%strNumExt%",e("#address_row4").attr("numext"))).replace("%strLibAch%",e("#address_row6").attr("libelle_acheminement"))),o=o.replace("%login%",a.login||""),o=o.replace("%password%",a.password||"")},e.fn.getHighlightedResult=function(e,r,s,a){var o="";return o=o+'<li><div class="address-autocomplete-result-list address-autocomplete-result-list-style-'+a.autocompleteListStyle+'" id="'+e+'">',"address_row6"==r&&(o+=s.ligne6.highlight,""!==s.ligne5.libelle&&(o+='<br/><span class="text-muted">'+s.ligne5.libelle+"</span>")),"address_row4"==r&&(o+=s.ligne4.highlight,""!==s.ligne5.libelle?(o+='<br/><span class="text-muted">'+s.ligne5.libelle+"</span>",""===s.ligne4.numero&&(o+=', <span class="text-muted">'+s.ligne6.codePostal+" "+s.ligne6.libelleAcheminement+"</span>")):""!==s.ligne4.numero||"PARIS"!==s.ligne6.libelleAcheminement&&"LYON"!==s.ligne6.libelleAcheminement&&"MARSEILLE"!==s.ligne6.libelleAcheminement||(o+='<br/><span class="text-muted">'+s.ligne6.codePostal+" "+s.ligne6.libelleAcheminement+"</span>")),"address_row3"==r&&(o+=s.ligne3.libelle+'<br /><span class="text-muted">'+(s.ligne4.numero+" "+s.ligne4.extLongue+" "+s.ligne4.libelleVoie).trim()+", "+s.ligne6.codePostal+" "+s.ligne6.libelleAcheminement+"</span>"),o+="</div></li>"},e.fn.getHtmlForm=function(r){var s="",a="";if("bootstrap4"===r.ihmModelAndVersion){s='<form id="address-autocomplete-form" class="container" autocomplete="off">\n'+e.fn.setOptionTitle(r.title);var o='<div class="form-group row">\n    <label id="address_row0_label" for="address_row1" class="col-md-5 col-form-label">Civilité :</label>\n    <div class="btn-group colors col-md-7" data-toggle="buttons">\n       <label class="btn btn-primary active gender_male">\n       <input type="radio" class="form-control"  id="gender_male" name="options" value="M" autocomplete="off" checked> Monsieur\n       </label>\n       <label class="btn btn-primary gender_female">\n       <input type="radio" class="form-control"  id="gender_female" name="options" value="MME" autocomplete="off"> Madame\n       </label>\n       </div>\n</div>\n';if(o='<div class="form-group row">\n    <label id="address_row0_label" class="col-md-5 col-form-label">Civilité :</label>\n    <div class="col-md-7 form-check">\n        <label class="form-check-label">\n            <input class="form-check-input" type="radio" name="options" id="gender_male" value="M" autocomplete="off" checked> Monsieur\n        </label>\n        <label class="form-check-label">\n            <input class="form-check-input" type="radio" name="options" id="gender_female" value="MME" autocomplete="off"> Madame\n        </label>\n    </div>\n</div>\n',r.oneFieldAddressRow1)a='<div class="form-group row">\n    <label id="address_row1_label" for="address_row1" class="col-md-5 col-form-label">Prénom Nom :</label>\n    <div class="col-md-7"><div class="input-group-btn">\n        <input type="input" tabindex="1" class="form-control" id="address_row1" maxlength="38" aria-describedby="Prénom Nom" placeholder="Ex: Jean Dupond" autocomplete="off">\n    </div></div>\n</div>\n';else{a='<div class="form-group row">\n    <div class="col-md-5  col-form-label">'+("first_name;last_name"==r.orderFieldAddressRow1?'<label id="address_row1_firstname_label" for="address_row1_first_name" class=" col-form-label">Prénom</label> - <label id="address_row1_lastname_name_label" for="address_row1_last_name" class="col-form-label">Nom</label> :':'<label id="address_row1_lastname_name_label" for="address_row1_last_name" class="col-form-label">Nom </label> - <label id="address_row1_firstname_label" for="address_row1_first_name" class="col-form-label">Prénom</label> :')+'</div>\n    <div class="col-md-7" id="address_row1"><div class="input-group">\n',"first_name;last_name"==r.orderFieldAddressRow1?(a+='        <input type="input" tabindex="1" class="form-control" xwidth="50%" id="address_row1_first_name" maxlength="38" aria-describedby="Prénom" placeholder="Ex: Albert" autocomplete="off">\n',a+='        <input type="input" tabindex="2" class="form-control" xwidth="50%" id="address_row1_last_name" maxlength="38" aria-describedby="Nom" placeholder="Ex: Dupond" autocomplete="off">\n'):(a+='        <input type="input" tabindex="1" class="form-control" xwidth="50%" id="address_row1_last_name" maxlength="38" aria-describedby="Nom" placeholder="Ex: Dupond" autocomplete="off">\n',a+='        <input type="input" tabindex="2" class="form-control" xwidth="50%" id="address_row1_first_name" maxlength="38" aria-describedby="Prénom" placeholder="Ex: Albert" autocomplete="off">\n'),a+="    </div></div>\n</div>\n"}s=s+o+a+'<div class="form-group row">\n    <label id="address_row6_label" for="address_row6" class="col-md-5 col-form-label">Code Postal - Localité * :</label>\n    <div class="col-md-7">\n        <input type="input" tabindex="2" class="form-control" id="address_row6" maxlength="38" aria-describedby="Code Postal - ville" placeholder="Ex : 33500 Libourne" autocomplete="off">\n        <div id="address_row6Help" class="invalid-feedback"></div>\n    </div>\n</div>\n<div class="form-group row">\n    <label id="address_row5_label" for="address_row5" class="col-md-5 col-form-label">Lieu dit ou Ancienne Commune :</label>\n    <div class="col-md-7">\n        <input type="input" tabindex="3" class="form-control" id="address_row5" maxlength="38" aria-describedby="Lieu dit ou ancienne commune" placeholder="" autocomplete="off">\n        <div id="address_row5Help" class="invalid-feedback"></div>\n    </div>\n</div>\n<div class="form-group row has-feedback">\n    <label id="address_row4_label" for="address_row4" class="col-md-5 col-form-label">Numéro et Nom de la voie * :</label>\n    <div class="col-md-7">\n        <input type="input" tabindex="4" class="form-control" id="address_row4" maxlength="38" aria-describedby="Numéro et nom de la voie" placeholder="Ex : 3 rue des lilas" autocomplete="off">\n        <div id="address_row4Help" class="invalid-feedback"></div>\n    </div>\n</div>\n<div class="form-group row has-feedback">\n    <label id="address_row3_label" for="address_row3" class="col-md-5 col-form-label">Bâtiment, résidence :</label>\n    <div class="col-md-7">\n        <input type="input" tabindex="5" class="form-control" id="address_row3" maxlength="38" aria-describedby="Bâtiment, résidence" placeholder="Ex : Residence la verboise" autocomplete="off">\n        <div id="address_row3Help" class="invalid-feedback"></div>\n    </div>\n</div>\n<div class="form-group row has-feedback">\n    <label id="address_row2_label" for="address_row2" class="col-md-5 col-form-label">Appartement, Escalier, Etage :</label>\n    <div class="col-md-7">\n        <input type="input" tabindex="6" class="form-control" id="address_row2" maxlength="38" aria-describedby="Appartement, Escalier, Etage" placeholder="Ex : Appartement 123" autocomplete="off">\n        <div id="address_row2Help" class="invalid-feedback"></div>\n    </div>\n</div>\n<div class="form-group row has-feedback">\n    <div class="col-md-5"></div>\n    <div class="col-md-7">\n        <button class="btn btn-secondary" type="reset" id="btn_clear" title="Efface le contenu du formulaire.">Effacer</button>\n        <button class="btn btn-primary" tabindex="7" type="button" title="Effectue une RNVP sur la l\'adresse saisie\net affiche des indicateurs en retour." id="btn_validate" role="checkRNVP">Valider</button>\n        <button class="btn btn-primary" tabindex="8" type="button" id="btn_copy" role="WholeAdrClipboard" title="Copie l\'adresse dans le presse-papier." class="collapse">Copier l\'adresse complète</button>\n    </div>\n</div>\n<div id="information">* Champs obligatoires</div></form>\n',r.displayAddressLabel&&(s+='<section class="height-100vh center-aligned">\n    <div class="wrapper">\n        <img class="background-image" src="images/envelop_result.png" width="600" height="326"/>\n        <div id="fullAddress" class="text"></div>\n    </div>\n</section>')}return s},e.fn.updateFinal=function(s){if(void 0!==s)return e("#fullAddress")[0].innerHTML="",e(".wrapper").hide("slow"),"";var a="",o="",d="",l=r.fullAddressCopyOrder.split(";"),i={},t={};return r.upperCaseFields&&e("form").find("input[type=input], input[type=password], textarea").each(function(){e(":input").each(function(){this.value=this.value.toUpperCase()})}),r.oneFieldAddressRow1?(a+=""!==e("input:radio:checked").val()?"<div>"+e("input:radio:checked").val()+" ":"",d+=""!==e("input:radio:checked").val()?e("input:radio:checked").val()+" ":"",a+=""!==e("#address_row1").val()?e("#address_row1").val()+"</div>\n":"",d+=""!==e("#address_row1").val()?e("#address_row1").val()+"\n":"",t.address_row1=a,""==e("#address_row1").val()&&(a="",d="",t.address_row1="")):(a+=""!==e("input:radio:checked").val()?"<div class='row'><div>"+e("input:radio:checked").val()+" </div> ":"",d+=""!==e("input:radio:checked").val()?e("input:radio:checked").val()+" ":"","first_name;last_name"==r.orderFieldAddressRow1?(a+=""!==e("#address_row1_first_name").val()?"<div title='Cliquez pour copier'>"+e("#address_row1_first_name").val()+" </div>":"",d+=""!==e("#address_row1_first_name").val()?e("#address_row1_first_name").val()+" ":"",a+=""!==e("#address_row1_last_name").val()?"<div title='Cliquez pour copier'>"+e("#address_row1_last_name").val()+" </div></div>\n":"",d+=""!==e("#address_row1_last_name").val()?e("#address_row1_last_name").val()+"\n":""):(a+=""!==e("#address_row1_last_name").val()?"<div title='Cliquez pour copier'>"+e("#address_row1_last_name").val()+" </div>":"",d+=""!==e("#address_row1_last_name").val()?e("#address_row1_last_name").val()+"\n":"",a+=""!==e("#address_row1_first_name").val()?"<div title='Cliquez pour copier'>"+e("#address_row1_first_name").val()+" </div></div>\n":"",d+=""!==e("#address_row1_first_name").val()?e("#address_row1_first_name").val()+" ":""),t.address_row1=a,""==e("#address_row1_first_name").val()&&""==e("#address_row1_last_name").val()&&(a="",d="",t.address_row1="")),o+=""!==e("#address_row2").val()?"<div title='Cliquez pour copier'>"+e("#address_row2").val()+"</div>\n":"",d+=""!==e("#address_row2").val()?e("#address_row2").val()+"\n":"",t.address_row2=""!==e("#address_row2").val()?"<div title='Cliquez pour copier'>"+e("#address_row2").val()+"</div>\n":"",o+=""!==e("#address_row3").val()?"<div title='Cliquez pour copier'>"+e("#address_row3").val()+"</div>\n":"",d+=""!==e("#address_row3").val()?e("#address_row3").val()+"\n":"",t.address_row3=""!==e("#address_row3").val()?"<div title='Cliquez pour copier'>"+e("#address_row3").val()+"</div>\n":"",o+=""!==e("#address_row4").val()?"<div title='Cliquez pour copier'>"+e("#address_row4").val()+"</div>\n":"",d+=""!==e("#address_row4").val()?e("#address_row4").val()+"\n":"",t.address_row4=""!==e("#address_row4").val()?"<div title='Cliquez pour copier'>"+e("#address_row4").val()+"</div>\n":"",o+=""!==e("#address_row5").val()?"<div title='Cliquez pour copier'>"+e("#address_row5").val()+"</div>\n":"",d+=""!==e("#address_row5").val()?e("#address_row5").val()+"\n":"",t.address_row5=""!==e("#address_row5").val()?"<div title='Cliquez pour copier'>"+e("#address_row5").val()+"</div>\n":"",o+=""!==e("#address_row6").val()?"<div title='Cliquez pour copier'>"+e("#address_row6").val()+"</div>":"",d+=""!==e("#address_row6").val()?e("#address_row6").val()+"\n":"",t.address_row6=""!==e("#address_row6").val()?"<div title='Cliquez pour copier'>"+e("#address_row6").val()+"</div>":"",""!=e.trim(o)&&(e("#fullAddress")[0].innerHTML="",l.forEach(function(r){void 0!==t[r]&&(i[r]=t[r]),e("#fullAddress")[0].innerHTML+=i[r]}),e(".wrapper").show("slow")),e('div[id="fullAddress"] > div').click(function(r){e.fn.copyToClipboard(r.target,!1),e(r.target).addClass("copied")}),e("#btn_copy").click(function(){e.fn.copyToClipboard(e("#fullAddress"),!0)}),d.toUpperCase()},e.fn.getTypeAddressRow4=function(e){return-1!==["PARIS","LYON","MARSEILLE"].indexOf(e)?"address_row4_acheminement_label":"address_row4_insee_code"},e.fn.AjaxRetry=function(s,a){for(var o=window.setTimeout(function(){},0);o--;)window.clearTimeout(o);var d=0,l=function(){e.ajax({url:s.urlWS,type:"GET",datatype:"json",tryCount:d,retryLimit:r.maxRetries,timebeforeTA:r.maxRetriesTimeout,timeout:r.ajaxTimeout,beforeSend:function(){e(s.object).addClass("ajax-loading")},success:function(d){var l=e.fn.retrieveAddressFromSerca(d,e(s.object)[0].id,r);clearTimeout(o),e(s.object).removeClass("ajax-loading"),e("#erreur_information").remove(),a(l)},dataFilter:function(r){var a=JSON.parse(r);if("address_row3"==e(s.object)[0].id&&""!==s.numero_address_row4)for(var o=a.reponse.adresse.length-1;o>=0;o--)a.reponse.adresse[o].ligne4.numero!==s.numero_address_row4&&a.reponse.adresse.splice(o,1);if("address_row3"==e(s.object)[0].id){var d={};a.reponse.adresse.unshift(d)}return JSON.stringify(a)},error:function(r,a){if("timeout"!=a)500==r.status?(e("#erreur_information").remove(),e("#information").append("<div id='erreur'>Erreur du serveur! (err:"+r.statusText+"=>"+r.message+")</div>")):(e("#erreur_information").remove(),e("#information").append("<div id='erreur'>Le serveur n'est pas accessible! (err:"+r.statusText+"=>"+r.message+")</div>")),e(s.object).removeClass("ajax-loading");else if(this.tryCount++,d++,this.tryCount<=this.retryLimit){e("#erreur_information").remove();var i=parseInt(this.timebeforeTA+10*this.tryCount/100*1e4);e("#information").append("<div id='erreur_information'>Temps de réponse trop long. Nouvel éssai : "+this.tryCount+"/"+this.retryLimit+"</div>"),o=setTimeout(l,parseInt(i))}}})};l()},e.fn.copyToClipboard=function(r,s){var a=e("<textarea>");e("body").append(a),s?a.val(e.fn.updateFinal()).select():a.val(e(r).text()).select(),document.execCommand("copy"),a.remove()},e.fn.toggleShow=function(){e(".wrapper").toggleClass("show")},e.fn.findWord=function(e){var r=["APPARTEMENT","ESCALIER"],s=["APPT","ESC"].indexOf(e);return-1!==s?r[s]:""},e.fn.checkExtend=function(r){for(var s="",a=r.val().toUpperCase().split(" "),o=0;o<a.length;o++){var d=e.fn.findWord(a[o]);s+=""!==d&&(s+d).length<=38?d+" ":a[o]+" "}return s},e.fn.inArray=function(e,r){for(var s=0;s<r.length;s++)if(r[s]===e)return!0;return!1},e.fn.sercaForm=function(o){this.each(function(){var d=e(this),l={backColor:"",upperCaseFields:!1,title:"",autocompleteListStyle:"",ihmModelAndVersion:"bootstrap4",login:"ihm_services_adresses",password:"SAi0DFgoJf",maxRetries:3,maxRetriesTimeout:3e3,ajaxTimeout:1e3,minDelayBeforeCall:50,minLengthBeforeCall:3,autocompletion:{row3:!1,row4_number:!0,row4_road:!0,postal_code_locality:!0,cedex_id:!0},continueOnError:!0,doRnvp:!1,rnvp:{row3:!1,row4_number:!0,row4_road:!0,postal_code_locality:!0,cedex_id:!0},nbDisplayedResults:5,oneFieldAddressRow1:!0,orderFieldAddressRow1:"last-first",fullAddressCopyOrder:"address_row1;address_row2;address_row3;address_row4;address_row5;address_row6",language:"fr",lockFormRow6:!0,displayAddressLabel:!1,corpsProxy:"https://cors-proxy.seguret.org/",distantDNS:"https://www.serca.preprod.laposte.fr"};return r=e.extend(l,o),d.append(e.fn.getHtmlForm(r)),r.doRnvp?e("#btn_validate").show():e("#btn_validate").hide(),r.doFullClipboardCopy?e("#btn_copy").show():e("#btn_copy").hide(),r.upperCaseFields&&e("form").find("input[type=input], input[type=password], textarea").each(function(){e(this).css("text-transform","uppercase")}),e.fn.lockForm=function(){e("form").find("input[type=input], input[type=password], textarea").each(function(){e.fn.inArray(e(this)[0].id.toString(),["address_row6","address_row1_first_name","address_row1_last_name","address_row1"])||e(this).prop("disabled",!0).css("cursor","not-allowed")})},e.fn.unlockForm=function(){e("form").find("input[type=input], input[type=password], textarea").each(function(){e(this).prop("disabled",!1),e(this).css("cursor","default")})},r.lockFormRow6?e.fn.lockForm():e.fn.unlockForm(),void 0!==r.backColor&&r.backColor.length>0&&e("#address-autocomplete-form").css("background-color",r.backColor),e("#btn_clear").click(function(){e("#civ3").parent().removeClass("active"),e("#gender_female").parent().removeClass("active"),e("#gender_male").parent().addClass("active"),e.fn.updateFinal(!0),r.lockFormRow6&&e.fn.lockForm()}),e("input[type=radio]").change(function(){e.fn.updateFinal()}),r.oneFieldAddressRow1?e("#address_row1").change(function(){e.fn.updateFinal()}):(e("#address_row1_first_name").change(function(){e.fn.updateFinal()}),e("#address_row1_last_name").change(function(){e.fn.updateFinal()})),e("#address_row2").change(function(){e.fn.updateFinal()}),e("#address_row3").change(function(){e.fn.updateFinal()}),e("#address_row5").change(function(){e.fn.updateFinal()}),e.widget("ui.autocomplete",e.ui.autocomplete,{_renderMenu:function(r,s){var a=this;void 0!==s&&e.each(s,function(o,d){a._renderItemData(r,d),o+1===s.length&&e('<li class="ui-state-disabled footer-autocomplete" id="SNAFooter"><a class="ui-state-disabled" target="_blank" href="https://github.com/LaPosteSNA/serca-form"><img class="ui-state-disabled" src="images/powered-by-laposte-on-white.png" alt="Avec La Poste"/></a></li>').appendTo(r).data("ui-autocomplete-item",d)})},_renderItemData:function(r,s){e(s.highlightedResult).appendTo(r).data("ui-autocomplete-item",s)}}),e("#address_row6").autocomplete({minLength:r.minLengthBeforeCall,autoFocus:!0,source:function(o,d){var l={object:e("#address_row6"),result:[],urlWS:e.fn.getSercaURL(e("#address_row6").val(),"address_row6",r)+s+a};d(e.fn.AjaxRetry(l,d))},select:function(s,a){return e("#address_row6").val(a.item.address_row6).attr("insee_code",a.item.insee_code).attr("libelle_acheminement",a.item.libelle_acheminement),e("#address_row5").val(a.item.address_row5),r.displayAddressLabel&&(e.fn.updateFinal(),e.fn.unlockForm()),!1},open:function(){e(this).removeClass("ui-corner-all").addClass("ui-corner-top")},close:function(){e(this).removeClass("ui-corner-top").addClass("ui-corner-all")}}),e("#address_row4").autocomplete({minLength:r.minLengthBeforeCall,autoFocus:!0,source:function(o,d){var l={object:e("#address_row4"),result:[],urlWS:e.fn.getSercaURL(e("#address_row4").val(),e.fn.getTypeAddressRow4(e("#address_row6").attr("libelle_acheminement")),r)+s+a};d(e.fn.AjaxRetry(l,d))},select:function(s,a){e("#address_row4").attr("voie",a.item.justVoieaddress_row4).attr("numext",a.item.numext),e("#address_row4").val(e.trim(a.item.numext+" "+a.item.justVoieaddress_row4)),e("#address_row5").val(a.item.address_row5),e("#address_row6").val(a.item.address_row6),r.displayAddressLabel&&e.fn.updateFinal(),e("#address_row3").autocomplete({minLength:0}).focus().autocomplete("search",""),s.preventDefault()},open:function(){e(this).removeClass("ui-corner-all").addClass("ui-corner-top")},close:function(){e(this).removeClass("ui-corner-top").addClass("ui-corner-all"),r.displayAddressLabel&&e.fn.updateFinal()},change:function(){r.displayAddressLabel&&e.fn.updateFinal()}}),e("#address_row3").autocomplete({minLength:r.minLengthBeforeCall,autoFocus:!0,source:function(o,d){var l={object:e("#address_row3"),numero_address_row4:e("#address_row4").attr("numext"),result:[],urlWS:e.fn.getSercaURL(e("#address_row3").val(),"address_row3",r)+s+a};d(e.fn.AjaxRetry(l,d))},select:function(s,a){"-1"!==a.item.insee_code?(e("#address_row3").val(a.item.address_row3).attr("insee_code",a.item.insee_code),e("#address_row4").val(a.item.address_row4),e("#address_row5").val(a.item.address_row5),e("#address_row6").val(a.item.address_row6)):e("#address_row3").val(""),r.displayAddressLabel&&e.fn.updateFinal(),13===s.which&&e("#address_row2").focus()},open:function(){e(this).removeClass("ui-corner-all").addClass("ui-corner-top"),r.displayAddressLabel&&e.fn.updateFinal()},close:function(){e(this).removeClass("ui-corner-top").addClass("ui-corner-all")},change:function(){r.displayAddressLabel&&e.fn.updateFinal()}}),d})}}(jQuery);
//# sourceMappingURL=jquery.serca-form.min.js.map